---
layout: default
title: Home

---
<script lang="js">
    import { onMount } from "svelte";

    const kanjiList = {
        0: "ゼロ",
        1: "一",
        2: "二",
        3: "三",
        4: "四",
        5: "五",
        6: "六",
        7: "七",
        8: "八",
        9: "九",
        10: "十",
        100: "百",
        1000: "千",
        10000: "万",
    };
    let result = "";
    let question;

    function checkAnswer() {
        const a = document.getElementById("answer").value;
        const q = question;
        const k = solveAnswer(q);

        if (a === k) {
            // Do something on correct
            result = "Correct!";
        } else {
            // Do something on incorrect
            result = "Inorrect!";
        }
    }

    function newQuestion() {
        // Generate a new number and display it to the screen.
        const number = Math.floor(Math.random() * 1001);
        // const number = 852;
        document.getElementById("answer").value = "";
        question = number;
        result = "";
    }

    function solveAnswer(number) {
        // If there is a specific entry in the kanji list, return early with that kanji
        if (number in kanjiList) {
            if (number >= 10000) {
                return "一" + kanjiList[number];
            } else {
                return kanjiList[number];
            }
        }

        let quotient, remainder;
        let string = "";
        const units = [1000, 100, 10];
        units.forEach((e) => {
            quotient = Math.floor(number / e);
            remainder = number % e;
            if (quotient > 0) {
                if (quotient == 1) {
                    string += kanjiList[e];
                } else {
                    string += kanjiList[quotient] + kanjiList[e];
                }
            }
            number = remainder;
        });

        // Add the final number unless it is a 0
        if (number == 0) {
            string += "";
        } else {
            string += kanjiList[number];
        }
        return string;
    }

    onMount(() => {
        newQuestion();
    });
</script>

<h2>おはよう！</h2>
<p>
    Welcome to the Kanji Number Quiz. Write the displayed number using Japanese
    Kanji and see if you are correct!
</p>
<p>
    You will need to use a kanji keyboard to type in kanji. <a
        href="https://www.tofugu.com/japanese/how-to-install-japanese-keyboard/"
        target="_blank"
        rel="noreferrer noopener">Learn More &nearr;</a
    >
</p>
<h3 on:load|once={newQuestion}>{question}</h3>

<span style="font-weight: bold;">{result}</span>
<form on:submit={checkAnswer}>
    <label for="answer">Answer: </label><input type="text" id="answer" />
    <button type="button" on:click={checkAnswer}>Check Answer</button>
    <button type="button" on:click={newQuestion}>New Number</button>
</form>
